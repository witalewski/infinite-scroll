(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n.p+"static/media/loading.e404159f.gif"},36:function(e,t,n){e.exports=n(64)},64:function(e,t,n){"use strict";n.r(t);var a,i,r,o,s,c,l,u,m,d,p,v=n(0),h=n.n(v),f=n(14),b=n.n(f),g=n(67),O=n(4),j=n(23),y=n(11),w=n(12),E=n(13),F=n(10),k=(n(42),n(2)),z=n(18),C=n(32),R=n.n(C),x=6,N=300+2*x,I=(a=function(){function e(){Object(w.a)(this,e),Object(y.a)(this,"imageURLs",i,this),Object(y.a)(this,"placeholdersCount",r,this),Object(y.a)(this,"favourites",o,this),Object(y.a)(this,"setImageURLs",s,this),Object(y.a)(this,"addImageURLs",c,this),Object(y.a)(this,"setPlaceholdersCount",l,this),Object(y.a)(this,"setFavourites",u,this),Object(y.a)(this,"addToFavourites",m,this),Object(y.a)(this,"removeFromFavourites",d,this),Object(y.a)(this,"requestMoreImages",p,this)}return Object(E.a)(e,[{key:"images",get:function(){return Object(j.a)(this.imageURLs).concat(Object(j.a)(new Array(this.placeholdersCount).fill("")))}}]),e}(),i=Object(F.a)(a.prototype,"imageURLs",[k.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=Object(F.a)(a.prototype,"placeholdersCount",[k.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=Object(F.a)(a.prototype,"favourites",[k.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new z.c(function(){var e=document.cookie.match(/shibe-dogs-elite=([^;]*)/);return null!==e&&e.length>0?JSON.parse(e[1]):[]}())}}),s=Object(F.a)(a.prototype,"setImageURLs",[k.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.imageURLs.replace(t)}}}),c=Object(F.a)(a.prototype,"addImageURLs",[k.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;(n=e.imageURLs).push.apply(n,Object(j.a)(t))}}}),l=Object(F.a)(a.prototype,"setPlaceholdersCount",[k.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.placeholdersCount=t}}}),u=Object(F.a)(a.prototype,"setFavourites",[k.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;e.favourites=t,n=t,document.cookie="shibe-dogs-elite=".concat(JSON.stringify(n))}}}),m=Object(F.a)(a.prototype,"addToFavourites",[k.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setFavourites(e.favourites.add(t))}}}),d=Object(F.a)(a.prototype,"removeFromFavourites",[k.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setFavourites(e.favourites.delete(t))}}}),Object(F.a)(a.prototype,"images",[k.e],Object.getOwnPropertyDescriptor(a.prototype,"images"),a.prototype),p=Object(F.a)(a.prototype,"requestMoreImages",[k.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;e.setPlaceholdersCount(e.placeholdersCount+t),function(e){return R.a.get("https://cors.io/?https://shibe.online/api/shibes?count=".concat(e))}(t).then(function(n){var a=n.data;e.setPlaceholdersCount(e.placeholdersCount-t),e.addImageURLs(a)})}}}),a),S=n(68),L=n(66),M=n(65),H=n(69),T=Object(H.a)(Object(O.b)(function(e){return{favourites:e.appState.favourites}})(Object(O.c)(function(e){var t=e.location,n=e.favourites;return h.a.createElement("nav",{className:"navbar sticky-top navbar-dark bg-dark navbar-expand-sm"},h.a.createElement("a",{className:"navbar-brand",href:"/"},"Infinite Scroll Demo"),h.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo01","aria-controls":"navbarTogglerDemo01","aria-expanded":"false","aria-label":"Toggle navigation"},h.a.createElement("span",{className:"navbar-toggler-icon"})),h.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo01"},h.a.createElement("ul",{className:"navbar-nav"},[{label:"New Photos",path:"/"},{label:"Favourites (".concat(n.size,")"),path:"/favourites"}].map(function(e){return h.a.createElement("li",{key:e.label,className:"nav-item ".concat(t.pathname===e.path&&"active")},h.a.createElement(M.a,{className:"nav-link",to:e.path},e.label))}))))}))),U=n(16),W=n(15),q=n(17),D=n(8),P=n(9);function J(){var e=Object(D.a)(["\n  position: absolute;\n  bottom: 12px;\n  right: 12px;\n\n  font-size: 36px;\n\n  transition: opacity 0.2s;\n\n  &.favourites-indicator--hidden {\n    opacity: 0;\n  }\n"]);return J=function(){return e},e}var B=P.a.div(J()),A=function(e){var t=e.isFavourite;return h.a.createElement(B,{className:"favourites-indicator ".concat(!t&&"favourites-indicator--hidden")},h.a.createElement("span",{role:"img","aria-label":"favourite"},"\u2764\ufe0f"))};function Y(){var e=Object(D.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 120px;\n  height: 120px;\n  padding-top: 12px;\n  font-size: 64px;\n\n  &.btn--hidden {\n    opacity: 0;\n  }\n"]);return Y=function(){return e},e}var $=P.a.button(Y()),G=function(e){var t=e.visible,n=e.isFavourite;return h.a.createElement($,{className:"btn btn-light ".concat(!t&&"btn--hidden"),type:"button"},n?"\ud83d\udc94":"\u2764\ufe0f")},K=n(35),Q=n.n(K);function V(){var e=Object(D.a)(["\n  position: relative;\n  width: 100%;\n  margin: ","px 0;\n  transition: height 0.2s;\n\n  cursor: pointer;\n\n  background-image: url(",");\n  background-color: lightgray;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-blend-mode: multiply;\n\n  .image {\n    width: 100%;\n    opacity: 0;\n    position: absolute;\n  }\n\n  .image--loaded {\n    opacity: 1;\n    transition: opacity 0.5s;\n  }\n"]);return V=function(){return e},e}var X=P.a.div(V(),x,Q.a),Z=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(U.a)(this,Object(W.a)(t).call(this,e))).onResize=function(){n.state.isImageLoaded&&n.setState({imageHeight:n.imageRef.current.clientHeight})},n.onImageLoad=function(e){var t=e.target;n.setState({isImageLoaded:!0,imageHeight:t.clientHeight})},n.onMouseOver=function(){n.setState({mouseOver:!0})},n.onMouseOut=function(){n.setState({mouseOver:!1})},n.addCurrentImageToFavourites=function(){n.props.addToFavourites(n.props.image),n.setState({mouseOver:!1})},n.removeCurrentImageFromFavourites=function(){n.props.removeFromFavourites(n.props.image),n.setState({mouseOver:!1})},n.state={isImageLoaded:!1,mouseOver:!1,imageHeight:0},n.imageRef=Object(v.createRef)(),n}return Object(q.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"render",value:function(){var e=this.props,t=e.image,n=e.favourites,a=this.state,i=a.mouseOver,r=a.isImageLoaded,o=a.imageHeight,s=n.includes(this.props.image);return h.a.createElement(X,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:{height:o||this.props.height},onClick:s?this.removeCurrentImageFromFavourites:this.addCurrentImageToFavourites},t&&h.a.createElement("img",{ref:this.imageRef,className:"image ".concat(r&&"image--loaded"),alt:"Shibe dog",src:t,decoding:"async",onLoad:this.onImageLoad}),h.a.createElement(G,{visible:i,isFavourite:s}),h.a.createElement(A,{isFavourite:s}))}}]),t}(v.Component),_=Object(O.b)(function(e){var t=e.appState;return{favourites:t.favourites,addToFavourites:t.addToFavourites,removeFromFavourites:t.removeFromFavourites}})(Object(O.c)(Z)),ee=function(){var e=[.75,1,1,1.33];return{next:function(){return e[Math.floor(4*Math.random())]}}}();function te(){var e=Object(D.a)(["\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n    margin: 0 ","px;\n"]);return te=function(){return e},e}var ne=P.a.ul(te(),x),ae=function(e){function t(){return Object(w.a)(this,t),Object(U.a)(this,Object(W.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.columnWidth;return h.a.createElement(ne,{className:"image-list",style:{flexBasis:"".concat(n,"px")}},t.map(function(e,t){return h.a.createElement("li",{className:"image-list--item",key:"".concat(e||"placeholder","-").concat(t)},h.a.createElement(_,{image:e,height:ee.next()*n}))}))}}]),t}(v.Component);function ie(){var e=Object(D.a)(["\n.title {\n    margin: 36px 0 24px;\n    text-align: center;\n}\n"]);return ie=function(){return e},e}var re=P.a.div(ie()),oe=function(e){var t=e.title;return h.a.createElement(re,{className:"row"},h.a.createElement("div",{className:"col"},h.a.createElement("h1",{className:"title"},t)))};function se(){var e=Object(D.a)(["\n  .image-list-container {\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n  }\n"]);return se=function(){return e},e}var ce=P.a.div(se()),le=function(e){function t(e){var n;return Object(w.a)(this,t),(n=Object(U.a)(this,Object(W.a)(t).call(this,e))).getMinColumnHeight=function(){var e=n.listContainerRef.current.childNodes,t=1/0;if(e&&e.length>0)for(var a=0;a<e.length;a++)t=Math.min(t,e[a].clientHeight);else t=0;return t},n.onScroll=function(){var e=window.pageYOffset||document.documentElement.scrollTop;n.getMinColumnHeight()<window.innerHeight+e&&n.props.requestMoreImages()},n.onResize=function(){var e=n.listContainerRef.current.clientWidth,t=Math.max(Math.floor(e/N),1),a=e/t-2*x;n.setState({columnsCount:t,columnWidth:a})},n.listContainerRef=Object(v.createRef)(),n.state={initialized:!1,columnsCount:0,actualColumnWidth:0},n}return Object(q.a)(t,e),Object(E.a)(t,[{key:"setupResizeHandlers",value:function(){window.addEventListener("resize",this.onResize),this.onResize()}},{key:"setupScrollHandlers",value:function(){window.addEventListener("scroll",this.onScroll),this.onScroll()}},{key:"componentDidMount",value:function(){this.state.initialized||(this.setupResizeHandlers(),this.props.infinite&&this.setupScrollHandlers(),this.setState({initialized:!0}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.props.infinite&&window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){var e=this.state,t=e.columnsCount,n=e.columnWidth,a=this.props,i=a.images,r=a.title,o=Object(z.a)(Object(z.b)(0,t).map(function(e){return[]}));return t&&n&&i.forEach(function(e,n){o.get(n%t).push(e)}),h.a.createElement(ce,null,h.a.createElement(oe,{title:r}),h.a.createElement("div",{className:"row"},h.a.createElement("div",{className:"col image-list-container",ref:this.listContainerRef},o.map(function(e,a){return h.a.createElement(ae,{key:"list-".concat(a,"-of-").concat(t),list:e,columnWidth:n})}))))}}]),t}(v.Component),ue=Object(O.b)(function(e){var t=e.appState;return{images:t.images,requestMoreImages:t.requestMoreImages}})(Object(O.c)(function(e){var t=e.images,n=e.requestMoreImages;return h.a.createElement(le,{infinite:!0,title:"New Photos",images:t,requestMoreImages:n})})),me=Object(O.b)(function(e){return{favourites:e.appState.favourites}})(Object(O.c)(function(e){var t=e.favourites;return h.a.createElement(le,{title:"Favourites",images:t.toJS()})})),de=new I,pe=function(){return h.a.createElement(O.a,{appState:de},h.a.createElement("div",{className:"App"},h.a.createElement(T,null),h.a.createElement("div",{className:"main container"},h.a.createElement(S.a,null,h.a.createElement(L.a,{exact:!0,path:"/",component:ue}),h.a.createElement(L.a,{exact:!0,path:"/favourites",component:me})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.a.render(h.a.createElement(g.a,{basename:"/infinite-scroll"},h.a.createElement(pe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,2,1]]]);
//# sourceMappingURL=main.de603eee.chunk.js.map