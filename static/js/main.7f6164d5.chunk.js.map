{"version":3,"sources":["assets/loading.gif","global/constants.js","AppState.js","utils/cookieUtil.js","api/shibeAPI.js","components/NavBar.js","components/Gallery/ImageItem/FavouritesIndicator.js","components/Gallery/ImageItem/FavouritesButton.js","components/Gallery/ImageItem/ImageItem.js","utils/placeholderHeightGenerator.js","components/Gallery/ImageList.js","components/Gallery/GalleryTitle.js","components/Gallery/Gallery.js","components/NewPhotosView.js","components/FavouritesView.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","LIST_MARGIN","MIN_COLUMN_WIDTH","AppState","Object","toConsumableArray","this","imageURLs","concat","Array","placeholdersCount","fill","observable","Set","match","document","cookie","length","JSON","parse","readFavouritesCookie","action","_this","replace","_this2$imageURLs","_this2","push","apply","_this3","favourites","data","_this4","stringify","favourite","_this5","setFavourites","add","_this6","delete","computed","count","arguments","undefined","_this7","setPlaceholdersCount","axios","get","getImageURLs","then","_ref","addImageURLs","withRouter","inject","_ref2","appState","observer","location","react_default","a","createElement","className","href","type","data-toggle","data-target","aria-controls","aria-expanded","aria-label","id","label","path","size","map","item","key","pathname","Link","to","FavouritesIndicatorStyled","styled","div","_templateObject","FavouritesIndicator","isFavourite","role","FavouritesButtonStyled","button","FavouritesButton_templateObject","FavouritesButton","visible","ImageItemStyled","ImageItem_templateObject","loadingGif","ImageItem","_Component","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onResize","state","isImageLoaded","setState","imageHeight","imageRef","current","clientHeight","onImageLoad","target","onMouseOver","mouseOver","onMouseOut","addCurrentImageToFavourites","addToFavourites","image","removeCurrentImageFromFavourites","removeFromFavourites","createRef","inherits","createClass","value","window","addEventListener","removeEventListener","_this$props","_this$state","includes","style","height","onClick","ref","alt","src","decoding","onLoad","FavouritesButton_FavouritesButton","FavouritesIndicator_FavouritesIndicator","Component","placeholderHeightGenerator","results","next","Math","floor","random","ImageListStyled","ul","ImageList_templateObject","ImageList","list","columnWidth","flexBasis","i","Gallery_ImageItem_ImageItem","GalleryTitleStyled","GalleryTitle_templateObject","GalleryTitle","title","PhotosViewStyled","Gallery_templateObject","Gallery","getMinColumnHeight","columns","listContainerRef","childNodes","minHeight","Infinity","min","onScroll","scroll","pageYOffset","documentElement","scrollTop","innerHeight","requestMoreImages","containerWidth","clientWidth","columnsCount","max","console","log","initialized","actualColumnWidth","setupResizeHandlers","infinite","setupScrollHandlers","images","imagesByColumn","List","Range","_","forEach","elem","GalleryTitle_GalleryTitle","ImageList_ImageList","Gallery_Gallery","toJS","App","index_module","components_NavBar","Switch","Route","exact","component","NewPhotosView","FavouritesView","Boolean","hostname","ReactDOM","render","BrowserRouter","basename","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7f6164d5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.e404159f.gif\";","export const MIN_LIST_WIDTH = 300;\nexport const LIST_MARGIN = 6;\nexport const MIN_COLUMN_WIDTH = MIN_LIST_WIDTH + 2 * LIST_MARGIN;\nexport const BATCH_SIZE = 12;","import { observable, action, computed } from 'mobx';\nimport { Set } from 'immutable';\nimport { getImageURLs } from './api/shibeAPI';\nimport {\n  storeFavouritesCookie,\n  readFavouritesCookie,\n} from './utils/cookieUtil';\nimport { BATCH_SIZE } from './global/constants';\nclass AppState {\n  @observable imageURLs = [];\n  @observable placeholdersCount = 0;\n\n  @observable favourites = new Set(readFavouritesCookie());\n\n  @action\n  setImageURLs = imageURLs => {\n    this.imageURLs.replace(imageURLs);\n  };\n\n  @action addImageURLs = imageURLs => {\n    this.imageURLs.push(...imageURLs);\n  };\n\n  @action setPlaceholdersCount = placeholdersCount => {\n    this.placeholdersCount = placeholdersCount;\n  };\n\n  @action setFavourites = favourites => {\n    this.favourites = favourites;\n    storeFavouritesCookie(favourites);\n  };\n  @action addToFavourites = favourite => {\n    this.setFavourites(this.favourites.add(favourite));\n  };\n\n  @action removeFromFavourites = favourite => {\n    this.setFavourites(this.favourites.delete(favourite));\n  };\n\n  @computed get images() {\n    return [\n      ...this.imageURLs,\n      ...(new Array(this.placeholdersCount)).fill(''),\n    ];\n  }\n\n  @action\n  requestMoreImages = (count = BATCH_SIZE) => {\n    this.setPlaceholdersCount(this.placeholdersCount + count);\n    getImageURLs(count).then(({ data }) => {\n      this.setPlaceholdersCount(this.placeholdersCount - count);\n      this.addImageURLs(data);\n    });\n  };\n}\n\nexport { AppState };\n","export const readFavouritesCookie = () => {\n    const match = document.cookie.match(/shibe-dogs-elite=([^;]*)/);\n    if (match !== null && match.length > 0) {\n        return JSON.parse(match[1]);\n    }\n    return [];\n}\nexport const storeFavouritesCookie = data => document.cookie = `shibe-dogs-elite=${JSON.stringify(data)}`;","import axios from 'axios';\nexport const getImageURLs = count => axios.get(`https://cors.io/?https://shibe.online/api/shibes?count=${count}`);","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\nexport const NavBar = ({ location, favourites }) => (\n  <nav className=\"navbar sticky-top navbar-dark bg-dark navbar-expand-sm\">\n    <a className=\"navbar-brand\" href=\"/\">\n      Infinite Scroll Demo\n    </a>\n    <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarTogglerDemo01\" aria-controls=\"navbarTogglerDemo01\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n    <span className=\"navbar-toggler-icon\"></span>\n  </button>\n    <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo01\">\n      <ul className=\"navbar-nav\">\n        {[\n          { label: 'New Photos', path: '/' },\n          { label: `Favourites (${favourites.size})`, path: '/favourites' },\n        ].map(item => (\n          <li\n            key={item.label}\n            className={`nav-item ${location.pathname === item.path &&\n              'active'}`}\n          >\n            <Link className=\"nav-link\" to={item.path}>\n              {item.label}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  </nav>\n);\n\nexport default withRouter(\n  inject(({ appState }) => ({\n    favourites: appState.favourites,\n  }))(observer(NavBar))\n);\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nconst FavouritesIndicatorStyled = styled.div`\n  position: absolute;\n  bottom: 12px;\n  right: 12px;\n\n  font-size: 36px;\n\n  transition: opacity 0.2s;\n\n  &.favourites-indicator--hidden {\n    opacity: 0;\n  }\n`;\nexport const FavouritesIndicator = ({ isFavourite }) => (\n  <FavouritesIndicatorStyled\n    className={`favourites-indicator ${!isFavourite &&\n      'favourites-indicator--hidden'}`}\n  >\n    <span role=\"img\" aria-label=\"favourite\">\n      ‚ù§Ô∏è\n    </span>\n  </FavouritesIndicatorStyled>\n);\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nconst FavouritesButtonStyled = styled.button`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 120px;\n  height: 120px;\n  padding-top: 12px;\n  font-size: 64px;\n\n  &.btn--hidden {\n    opacity: 0;\n  }\n`;\n\nexport const FavouritesButton = ({ visible, isFavourite }) => (\n  <FavouritesButtonStyled\n    className={`btn btn-light ${!visible && 'btn--hidden'}`}\n    type=\"button\"\n  >\n    {isFavourite ? 'üíî' : '‚ù§Ô∏è'}\n  </FavouritesButtonStyled>\n);\n","import React, { Component, createRef } from 'react';\nimport { observer, inject } from 'mobx-react';\nimport styled from '@emotion/styled';\nimport { FavouritesIndicator } from './FavouritesIndicator';\nimport { FavouritesButton } from './FavouritesButton';\nimport { LIST_MARGIN } from '../../../global/constants';\nimport loadingGif from '../../../assets/loading.gif';\n\nconst ImageItemStyled = styled.div`\n  position: relative;\n  width: 100%;\n  margin: ${LIST_MARGIN}px 0;\n  transition: height 0.2s;\n\n  cursor: pointer;\n\n  background-image: url(${loadingGif});\n  background-color: lightgray;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-blend-mode: multiply;\n\n  .image {\n    width: 100%;\n    opacity: 0;\n    position: absolute;\n  }\n\n  .image--loaded {\n    opacity: 1;\n    transition: opacity 0.5s;\n  }\n`;\n\nexport class ImageItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isImageLoaded: false,\n      mouseOver: false,\n      imageHeight: 0,\n    };\n    this.imageRef = createRef();\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.onResize);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize);\n  }\n\n  onResize = () => {\n    if (this.state.isImageLoaded) {\n      this.setState({\n        imageHeight: this.imageRef.current.clientHeight,\n      });\n    }\n  };\n\n  onImageLoad = ({ target }) => {\n    this.setState({ isImageLoaded: true, imageHeight: target.clientHeight });\n  };\n\n  onMouseOver = () => {\n    this.setState({ mouseOver: true });\n  };\n\n  onMouseOut = () => {\n    this.setState({\n      mouseOver: false,\n    });\n  };\n\n  addCurrentImageToFavourites = () => {\n    this.props.addToFavourites(this.props.image);\n    this.setState({ mouseOver: false });\n  };\n\n  removeCurrentImageFromFavourites = () => {\n    this.props.removeFromFavourites(this.props.image);\n    this.setState({ mouseOver: false });\n  };\n\n  render() {\n    const { image, favourites } = this.props;\n    const { mouseOver, isImageLoaded, imageHeight } = this.state;\n    const isFavourite = favourites.includes(this.props.image);\n    return (\n      <ImageItemStyled\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n        style={{ height: imageHeight || this.props.height }}\n        onClick={\n          isFavourite\n            ? this.removeCurrentImageFromFavourites\n            : this.addCurrentImageToFavourites\n        }\n      >\n        {image && (\n          <img\n            ref={this.imageRef}\n            className={`image ${isImageLoaded && 'image--loaded'}`}\n            alt=\"Shibe dog\"\n            src={image}\n            decoding=\"async\"\n            onLoad={this.onImageLoad}\n          />\n        )}\n        <FavouritesButton visible={mouseOver} isFavourite={isFavourite} />\n        <FavouritesIndicator isFavourite={isFavourite} />\n      </ImageItemStyled>\n    );\n  }\n}\n\nexport default inject(({ appState }) => ({\n  favourites: appState.favourites,\n  addToFavourites: appState.addToFavourites,\n  removeFromFavourites: appState.removeFromFavourites,\n}))(observer(ImageItem));\n","export const placeholderHeightGenerator = (() => {\n  const results = [0.75, 1, 1, 1.33];\n  return {\n    next: () => results[Math.floor(Math.random() * 4)],\n  };\n})();\n","import React, { Component } from 'react';\nimport styled from '@emotion/styled';\nimport ImageItem from './ImageItem/ImageItem';\nimport { placeholderHeightGenerator } from '../../utils/placeholderHeightGenerator';\nimport { LIST_MARGIN } from '../../global/constants';\n\nconst ImageListStyled = styled.ul`\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    padding: 0;\n    margin: 0 ${LIST_MARGIN}px;\n`;\nexport class ImageList extends Component {\n  render() {\n    const { list, columnWidth } = this.props;\n    return (\n      <ImageListStyled className=\"image-list\" style={{flexBasis: `${columnWidth}px`}}>\n        {list.map((image, i) => (\n          <li\n            className=\"image-list--item\"\n            key={`${image || 'placeholder'}-${i}`}\n          >\n            <ImageItem\n              image={image}\n              height={placeholderHeightGenerator.next() * columnWidth}\n            />\n          </li>\n        ))}\n      </ImageListStyled>\n    );\n  }\n}\n","import React from 'react';\nimport styled from '@emotion/styled';\n\nconst GalleryTitleStyled = styled.div`\n.title {\n    margin: 36px 0 24px;\n    text-align: center;\n}\n`;\n\nexport const GalleryTitle = ({ title }) => (\n  <GalleryTitleStyled className=\"row\">\n    <div className=\"col\">\n      <h1 className=\"title\">{title}</h1>\n    </div>\n  </GalleryTitleStyled>\n);\n","import React, { Component, createRef } from 'react';\nimport { List, Range } from 'immutable';\nimport styled from '@emotion/styled';\nimport { ImageList } from './ImageList';\nimport { GalleryTitle } from './GalleryTitle';\nimport { LIST_MARGIN, MIN_COLUMN_WIDTH } from '../../global/constants';\n\nconst PhotosViewStyled = styled.div`\n  .image-list-container {\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n  }\n`;\n\nexport class Gallery extends Component {\n  constructor(props) {\n    super(props);\n    this.listContainerRef = createRef();\n    this.state = {\n      initialized: false,\n      columnsCount: 0,\n      actualColumnWidth: 0,\n    };\n  }\n\n  getMinColumnHeight = () => {\n    const columns = this.listContainerRef.current.childNodes;\n    let minHeight = Infinity;\n    if (columns && columns.length > 0) {\n      for (let i = 0; i < columns.length; i++) {\n        minHeight = Math.min(minHeight, columns[i].clientHeight);\n      }\n    } else {\n      minHeight = 0;\n    }\n    return minHeight;\n  };\n\n  onScroll = () => {\n    const scroll = window.pageYOffset || document.documentElement.scrollTop;\n    this.getMinColumnHeight() < window.innerHeight + scroll &&\n      this.props.requestMoreImages();\n  };\n\n  onResize = () => {\n    const containerWidth = this.listContainerRef.current.clientWidth;\n    const columnsCount = Math.max(\n      Math.floor(containerWidth / MIN_COLUMN_WIDTH),\n      1\n    );\n    const columnWidth = containerWidth / columnsCount - 2 * LIST_MARGIN;\n    console.log(containerWidth, columnsCount, LIST_MARGIN, columnWidth);\n    this.setState({\n      columnsCount,\n      columnWidth,\n    });\n  };\n\n  setupResizeHandlers() {\n    window.addEventListener('resize', this.onResize);\n    this.onResize();\n  }\n\n  setupScrollHandlers() {\n    window.addEventListener('scroll', this.onScroll);\n    this.onScroll();\n  }\n\n  componentDidMount() {\n    if (!this.state.initialized) {\n      this.setupResizeHandlers();\n      this.props.infinite && this.setupScrollHandlers();\n      this.setState({ initialized: true });\n    }\n  }\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize);\n    this.props.infinite && window.removeEventListener('scroll', this.onScroll);\n  }\n\n  render() {\n    const { columnsCount, columnWidth } = this.state;\n    const { images, title } = this.props;\n    const imagesByColumn = List(Range(0, columnsCount).map(_ => []));\n\n    if (columnsCount && columnWidth) {\n      images.forEach((elem, i) => {\n        imagesByColumn.get(i % columnsCount).push(elem);\n      });\n    }\n\n    return (\n      <PhotosViewStyled>\n        <GalleryTitle title={title} />\n        <div className=\"row\">\n          <div className=\"col image-list-container\" ref={this.listContainerRef}>\n            {imagesByColumn.map((list, i) => (\n              <ImageList\n                key={`list-${i}-of-${columnsCount}`}\n                list={list}\n                columnWidth={columnWidth}\n              />\n            ))}\n          </div>\n        </div>\n      </PhotosViewStyled>\n    );\n  }\n}\n","import React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { Gallery } from './Gallery/Gallery';\n\nexport const NewPhotosView = ({ images, requestMoreImages }) => (\n  <Gallery\n    infinite\n    title=\"New Photos\"\n    images={images}\n    requestMoreImages={requestMoreImages}\n  />\n);\n\nexport default inject(({ appState }) => ({\n  images: appState.images,\n  requestMoreImages: appState.requestMoreImages,\n}))(observer(NewPhotosView));\n","import React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { Gallery } from './Gallery/Gallery';\n\nexport const FavouritesView = ({ favourites }) => (\n  <Gallery title=\"Favourites\" images={favourites.toJS()} />\n);\n\nexport default inject(({ appState }) => ({\n  favourites: appState.favourites,\n}))(observer(FavouritesView));\n","import React from 'react';\nimport { Provider } from 'mobx-react';\nimport { AppState } from './AppState';\nimport { Switch, Route } from 'react-router-dom';\nimport NavBar from './components/NavBar';\nimport NewPhotosView from './components/NewPhotosView';\nimport FavouritesView from './components/FavouritesView';\n\nconst appState = new AppState();\n\nexport const App = () => (\n  <Provider appState={appState}>\n    <div className=\"App\">\n      <NavBar />\n      <div className=\"main container\">\n        <Switch>\n          <Route exact path=\"/\" component={NewPhotosView} />\n          <Route exact path=\"/favourites\" component={FavouritesView} />\n        </Switch>\n      </div>\n    </div>\n  </Provider>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <BrowserRouter basename=\"/infinite-scroll\">\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}