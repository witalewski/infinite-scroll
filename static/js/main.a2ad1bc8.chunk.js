(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(63)},63:function(e,t,a){"use strict";a.r(t);var n,i,r,o,c,l,s,u=a(0),m=a.n(u),h=a(8),d=a.n(h),p=a(66),b=a(15),g=a(67),f=a(65),v=a(12),j=a(19),O=a(23),y=a(9),w=a(10),E=a(11),C=a(7),R=(a(41),a(2)),k=a(13),L=a(32),N=a.n(L),I=function(){var e=[.75,1,1,1.33];return{next:function(){return e[Math.floor(4*Math.random())]}}}(),x=(n=function(){function e(){Object(w.a)(this,e),Object(y.a)(this,"imageURLs",i,this),Object(y.a)(this,"placeholdersCount",r,this),Object(y.a)(this,"setImageURLs",o,this),Object(y.a)(this,"addImageURLs",c,this),Object(y.a)(this,"setPlaceholdersCount",l,this),Object(y.a)(this,"requestMoreImages",s,this)}return Object(E.a)(e,[{key:"images",get:function(){return Object(O.a)(this.imageURLs).concat(Object(O.a)(Object(k.b)(0,this.placeholdersCount).map(function(e){return{isPlaceholder:!0,placeholderHeightRatio:I.next()}})))}}]),e}(),i=Object(C.a)(n.prototype,"imageURLs",[R.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),r=Object(C.a)(n.prototype,"placeholdersCount",[R.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),o=Object(C.a)(n.prototype,"setImageURLs",[R.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.imageURLs.replace(t)}}}),c=Object(C.a)(n.prototype,"addImageURLs",[R.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var a;(a=e.imageURLs).push.apply(a,Object(O.a)(t))}}}),l=Object(C.a)(n.prototype,"setPlaceholdersCount",[R.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.placeholdersCount=t}}}),Object(C.a)(n.prototype,"images",[R.e],Object.getOwnPropertyDescriptor(n.prototype,"images"),n.prototype),s=Object(C.a)(n.prototype,"requestMoreImages",[R.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setPlaceholdersCount(e.placeholdersCount+t),function(e){return N.a.get("https://cors.io/?https://shibe.online/api/shibes?count=".concat(e))}(t).then(function(a){var n=a.data;e.setPlaceholdersCount(e.placeholdersCount-t),e.addImageURLs(n.map(function(e){return{url:e,isPlaceholder:!1,placeholderHeightRatio:I.next()}}))})}}}),n),z=a(64),U=a(68),H=Object(U.a)(function(e){var t=e.items,a=e.location;return m.a.createElement("nav",{className:"navbar sticky-top navbar-light bg-light navbar-expand"},m.a.createElement("a",{className:"navbar-brand",href:"/"},"Infinite Scroll Demo"),m.a.createElement("div",{className:"collapse navbar-collapse"},m.a.createElement("ul",{className:"navbar-nav"},t.map(function(e){return m.a.createElement("li",{key:e.label,className:"nav-item ".concat(a.pathname===e.path&&"active")},m.a.createElement(z.a,{className:"nav-link",to:e.path},e.label))}))))}),M=a(21),S=a(18),W=a(22),P=function(e){var t=e.image,a=e.onImageLoad;return t.isPlaceholder?m.a.createElement("div",{className:"image-placeholder"}):m.a.createElement("img",{className:"image",alt:"Shibe dog",src:t.url,decoding:"async",onLoad:a})},q=function(e){function t(){return Object(w.a)(this,t),Object(M.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(W.a)(t,e),Object(E.a)(t,[{key:"onImageLoad",value:function(e){e.target.parentNode.style.minHeight=0}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.columnWidth;return m.a.createElement("ul",{className:"image-list"},a.map(function(t,a){return m.a.createElement("li",{className:"image-list--item",key:"".concat(t.url||"placeholder","-").concat(a),style:{minHeight:n*t.placeholderHeightRatio}},m.a.createElement(P,{image:t,onImageLoad:e.onImageLoad}))}))}}]),t}(u.Component);function D(){var e=Object(b.a)(["\n  .image-list-container {\n    display: flex;\n    justify-content: center;\n  }\n\n  .image-list {\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    flex-basis: 50%;\n    padding: 0;\n    margin: 0 ","px;\n  }\n\n  .image-list--item {\n    background: lightgray;\n    margin: ","px 0;\n  }\n\n  .image {\n    width: 100%;\n    object-fit: cover;\n  }\n\n  .image-placeholder {\n    width: 100%;\n    height: 100%;\n  }\n"]);return D=function(){return e},e}var B=j.a.div(D(),6,6),F=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(M.a)(this,Object(S.a)(t).call(this,e))).listContainerRef=Object(u.createRef)(),a.state={initialized:!1,columnsCount:0,actualColumnWidth:0},a}return Object(W.a)(t,e),Object(E.a)(t,[{key:"onScroll",value:function(){var e=this.props.requestMoreImages,t=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollHeight<2*window.innerHeight+t&&e(16)}},{key:"onResize",value:function(){var e=Math.floor(this.listContainerRef.current.clientWidth/312),t=this.listContainerRef.current.clientWidth/e-12;this.setState({columnsCount:e,actualColumnWidth:t})}},{key:"componentDidMount",value:function(){this.state.initialized||(window.addEventListener("scroll",this.onScroll.bind(this)),window.addEventListener("resize",this.onResize.bind(this)),this.onScroll(),this.onResize(),this.setState({initialized:!0}))}},{key:"onImageLoad",value:function(e){e.target.parentNode.style.minHeight=0}},{key:"render",value:function(){var e=this.state,t=e.columnsCount,a=e.actualColumnWidth,n=this.props.images,i=Object(k.a)(Object(k.b)(0,t).map(function(e){return[]}));return t&&n.forEach(function(e,a){return i.get(a%t).push(e)}),m.a.createElement(B,{className:"row"},m.a.createElement("div",{className:"col image-list-container",ref:this.listContainerRef},i.map(function(e,n){return m.a.createElement(q,{key:"list-".concat(n,"-of-").concat(t),list:e,columnWidth:a})})))}}]),t}(u.Component),J=Object(v.b)(function(e){var t=e.appState;return{images:t.images,requestMoreImages:t.requestMoreImages}})(Object(v.c)(F)),A=function(){return m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col"},"[Favourites]"))};function T(){var e=Object(b.a)(["\n  .main {\n    padding-top: 56px;\n  }\n"]);return T=function(){return e},e}var Y=j.a.div(T()),$=new x,G=function(){return m.a.createElement(v.a,{appState:$},m.a.createElement(Y,{className:"App"},m.a.createElement(H,{items:[{label:"Home",path:"/"},{label:"Favourites",path:"/favourites"}]}),m.a.createElement("div",{className:"main container"},m.a.createElement(g.a,null,m.a.createElement(f.a,{exact:!0,path:"/",component:J}),m.a.createElement(f.a,{path:"/favourites",component:A})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));d.a.render(m.a.createElement(p.a,{basename:"/infinite-scroll"},m.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.a2ad1bc8.chunk.js.map