(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,n){e.exports=n.p+"static/media/loading.e404159f.gif"},37:function(e,t,n){e.exports=n(65)},65:function(e,t,n){"use strict";n.r(t);var a,i,o,r,s,c,l,u,m,d,h,p=n(0),b=n.n(p),v=n(14),f=n.n(v),g=n(68),O=n(10),y=n(4),j=n(13),w=n(23),E=n(9),F=n(11),C=n(12),k=n(7),N=(n(43),n(2)),S=n(18),R=n(32),x=n.n(R),z=(a=function(){function e(){Object(F.a)(this,e),Object(E.a)(this,"imageURLs",i,this),Object(E.a)(this,"placeholdersCount",o,this),Object(E.a)(this,"favourites",r,this),Object(E.a)(this,"setImageURLs",s,this),Object(E.a)(this,"addImageURLs",c,this),Object(E.a)(this,"setPlaceholdersCount",l,this),Object(E.a)(this,"setFavourites",u,this),Object(E.a)(this,"addToFavourites",m,this),Object(E.a)(this,"removeFromFavourites",d,this),Object(E.a)(this,"requestMoreImages",h,this)}return Object(C.a)(e,[{key:"images",get:function(){return Object(w.a)(this.imageURLs).concat(Object(w.a)(Object(S.b)(0,this.placeholdersCount).map(function(e){return""})))}}]),e}(),i=Object(k.a)(a.prototype,"imageURLs",[N.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=Object(k.a)(a.prototype,"placeholdersCount",[N.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),r=Object(k.a)(a.prototype,"favourites",[N.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new S.c(function(){var e=document.cookie.match(/shibe-dogs-elite=([^;]*)/);return null!==e&&e.length>0?JSON.parse(e[1]):null}()||[])}}),s=Object(k.a)(a.prototype,"setImageURLs",[N.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.imageURLs.replace(t)}}}),c=Object(k.a)(a.prototype,"addImageURLs",[N.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;(n=e.imageURLs).push.apply(n,Object(w.a)(t))}}}),l=Object(k.a)(a.prototype,"setPlaceholdersCount",[N.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.placeholdersCount=t}}}),u=Object(k.a)(a.prototype,"setFavourites",[N.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;e.favourites=t,n=t,document.cookie="shibe-dogs-elite=".concat(JSON.stringify(n))}}}),m=Object(k.a)(a.prototype,"addToFavourites",[N.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setFavourites(e.favourites.add(t))}}}),d=Object(k.a)(a.prototype,"removeFromFavourites",[N.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setFavourites(e.favourites.delete(t))}}}),Object(k.a)(a.prototype,"images",[N.e],Object.getOwnPropertyDescriptor(a.prototype,"images"),a.prototype),h=Object(k.a)(a.prototype,"requestMoreImages",[N.d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setPlaceholdersCount(e.placeholdersCount+t),function(e){return x.a.get("https://cors.io/?https://shibe.online/api/shibes?count=".concat(e))}(t).then(function(n){var a=n.data;e.setPlaceholdersCount(e.placeholdersCount-t),e.addImageURLs(a)})}}}),a),L=n(69),M=n(67),I=n(66),T=n(70),U=Object(T.a)(Object(y.b)(function(e){return{favourites:e.appState.favourites}})(Object(y.c)(function(e){var t=e.location,n=e.favourites;return b.a.createElement("nav",{className:"navbar sticky-top navbar-light bg-light navbar-expand"},b.a.createElement("a",{className:"navbar-brand",href:"/"},"Infinite Scroll Demo"),b.a.createElement("div",{className:"collapse navbar-collapse"},b.a.createElement("ul",{className:"navbar-nav"},[{label:"New Photos",path:"/"},{label:"Favourites (".concat(n.size,")"),path:"/favourites"}].map(function(e){return b.a.createElement("li",{key:e.label,className:"nav-item ".concat(t.pathname===e.path&&"active")},b.a.createElement(I.a,{className:"nav-link",to:e.path},e.label))}))))}))),W=n(16),A=n(15),H=n(17);function q(){var e=Object(O.a)(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  .image {\n    opacity: 0;\n    position: absolute;\n  }\n\n  .image--loaded {\n    opacity: 1;\n    transition: opacity 0.5s;\n  }\n\n  .overlay {\n    position: absolute;\n    top: 50%;\n    width: 100%;\n    height: 40%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    opacity: 1;\n\n    background: rgba(255, 255, 255, 0.9);\n\n    transition: opacity 0.2s;\n    transform: translateY(-50%);\n  }\n\n  .overlay--hidden {\n    opacity: 0;\n  }\n\n  .primary-button--hidden {\n    display: none;\n  }\n\n  .message {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .message--hidden {\n    display: none;\n  }\n\n  .favourites-indicator {\n    position: absolute;\n    bottom: 12px;\n    right: 12px;\n    transition: opacity 0.5s 0.2s;\n  }\n\n  .favourites-indicator--hidden {\n    opacity: 0;\n  }\n"]);return q=function(){return e},e}var P=j.a.div(q()),V=function(e){function t(e){var n;return Object(F.a)(this,t),(n=Object(W.a)(this,Object(A.a)(t).call(this,e))).onImageLoad=function(e){var t=e.target;n.setState({isImageLoaded:!0,imageHeight:t.clientHeight})},n.onMouseOver=function(){n.setState({mouseOver:!0})},n.onMouseOut=function(){n.state.message||n.setState({mouseOver:!1,message:"",undoVisible:!1,undoAction:null})},n.addToFavourites=function(){n.props.addToFavourites(n.props.image),n.setState({message:"Added to favourites!",undoAction:n.removeFromFavourites}),n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){n.setState({mouseOver:!1,message:"",undoVisible:!1,undoAction:null,primaryButtonVisible:!1})},2e3)},n.removeFromFavourites=function(){n.props.removeFromFavourites(n.props.image),n.setState({message:"Removed from favourites.",undoAction:n.addToFavourites}),n.timer&&clearTimeout(n.timer),n.timer=setTimeout(function(){n.setState({mouseOver:!1,message:"",undoVisible:!1,undoAction:null,primaryButtonVisible:!1})},2e3)},n.state={isImageLoaded:!1,mouseOver:!1,message:"",primaryButtonVisible:!1,imageHeight:0},n}return Object(H.a)(t,e),Object(C.a)(t,[{key:"componentWillUnmount",value:function(){this.timer&&clearTimeout(this.timer)}},{key:"render",value:function(){var e=this.props,t=e.image,n=e.favourites,a=this.state,i=a.mouseOver,o=a.isImageLoaded,r=a.imageHeight,s=n.includes(this.props.image);return b.a.createElement(P,{onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,style:{height:r||this.props.height}},t?b.a.createElement("img",{className:"image ".concat(o&&"image--loaded"),alt:"Shibe dog",src:t,decoding:"async",onLoad:this.onImageLoad}):b.a.createElement("div",{className:"image-placeholder"}),b.a.createElement("div",{className:"overlay ".concat(!i&&"overlay--hidden")},b.a.createElement("button",{type:"button",className:"btn btn-outline-primary primary-button ".concat(this.state.message&&"primary-button--hidden"),onClick:s?this.removeFromFavourites:this.addToFavourites},s?"\ud83d\udc94 Remove from Favourites":"\u2764\ufe0f Add to Favourites"),b.a.createElement("div",{className:"message ".concat(!this.state.message&&"message--hidden")},b.a.createElement("span",null,this.state.message),b.a.createElement("button",{type:"button",className:"btn btn-secondary btn-sm",onClick:this.state.undoAction},"Undo"))),b.a.createElement("div",{className:"favourites-indicator ".concat(!s&&"favourites-indicator--hidden")},b.a.createElement("span",{role:"img","aria-label":"favourite"},"\u2764\ufe0f"),"\ufe0f"))}}]),t}(p.Component),B=Object(y.b)(function(e){var t=e.appState;return{favourites:t.favourites,addToFavourites:t.addToFavourites,removeFromFavourites:t.removeFromFavourites}})(Object(y.c)(V)),J=6,D=300+2*J,Y=n(35),$=n.n(Y),G=function(){var e=[.75,1,1,1.33];return{next:function(){return e[Math.floor(4*Math.random())]}}}();function K(){var e=Object(O.a)(["\n  .image-list--item {\n    background-image: url(",");\n    background-color: lightgray;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-blend-mode: multiply;\n\n    margin: ","px 0;\n    transition: height 0.2s;\n  }\n"]);return K=function(){return e},e}var Q=j.a.ul(K(),$.a,J),X=function(e){function t(){return Object(F.a)(this,t),Object(W.a)(this,Object(A.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.columnWidth;return b.a.createElement(Q,{className:"image-list"},t.map(function(e,t){return b.a.createElement("li",{className:"image-list--item",key:"".concat(e||"placeholder","-").concat(t)},b.a.createElement(B,{image:e,height:G.next()*n}))}))}}]),t}(p.Component);function Z(){var e=Object(O.a)(["\n  .image-list-container {\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n  }\n\n  .image-list {\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    flex-basis: 50%;\n    padding: 0;\n    margin: 0 ","px;\n  }\n\n  .image {\n    width: 100%;\n    object-fit: cover;\n  }\n\n  .image-placeholder {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Z=function(){return e},e}var _=j.a.div(Z(),J),ee=function(e){function t(e){var n;return Object(F.a)(this,t),(n=Object(W.a)(this,Object(A.a)(t).call(this,e))).getMinColumnHeight=function(){var e=n.listContainerRef.current.childNodes;if(e&&e.length>0){for(var t=1/0,a=0;a<e.length;a++)t=Math.min(t,e[a].clientHeight);return t}return 0},n.onScroll=function(){var e=window.pageYOffset||document.documentElement.scrollTop;n.getMinColumnHeight()<window.innerHeight+e&&n.props.requestMoreImages(16)},n.onResize=function(){var e=Math.floor(n.listContainerRef.current.clientWidth/D),t=n.listContainerRef.current.clientWidth/e-2*J;n.setState({columnsCount:e,actualColumnWidth:t})},n.listContainerRef=Object(p.createRef)(),n.state={initialized:!1,columnsCount:0,actualColumnWidth:0},n}return Object(H.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.state.initialized||(window.addEventListener("resize",this.onResize),this.onResize(),this.props.infinite&&(window.addEventListener("scroll",this.onScroll),this.onScroll()),this.setState({initialized:!0}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),this.props.infinite&&window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){var e=this.state,t=e.columnsCount,n=e.actualColumnWidth,a=this.props,i=a.images,o=a.title,r=Object(S.a)(Object(S.b)(0,t).map(function(e){return[]}));return t&&n&&i.forEach(function(e,n){r.get(n%t).push(e)}),b.a.createElement(_,null,b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col"},b.a.createElement("h1",null,o))),b.a.createElement("div",{className:"row"},b.a.createElement("div",{className:"col image-list-container",ref:this.listContainerRef},r.map(function(e,a){return b.a.createElement(X,{key:"list-".concat(a,"-of-").concat(t),list:e,columnWidth:n})}))))}}]),t}(p.Component),te=Object(y.b)(function(e){var t=e.appState;return{images:t.images,requestMoreImages:t.requestMoreImages}})(Object(y.c)(function(e){var t=e.images,n=e.requestMoreImages;return b.a.createElement(ee,{infinite:!0,title:"New Photos",images:t,requestMoreImages:n})})),ne=Object(y.b)(function(e){return{favourites:e.appState.favourites}})(Object(y.c)(function(e){var t=e.favourites;return b.a.createElement(ee,{title:"Favourites",images:t.toJS()})}));function ae(){var e=Object(O.a)(["\n  .main {\n    padding-top: 56px;\n  }\n"]);return ae=function(){return e},e}var ie=j.a.div(ae()),oe=new z,re=function(){return b.a.createElement(y.a,{appState:oe},b.a.createElement(ie,{className:"App"},b.a.createElement(U,null),b.a.createElement("div",{className:"main container"},b.a.createElement(L.a,null,b.a.createElement(M.a,{exact:!0,path:"/",component:te}),b.a.createElement(M.a,{exact:!0,path:"/favourites",component:ne})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));f.a.render(b.a.createElement(g.a,{basename:"/infinite-scroll"},b.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[37,2,1]]]);
//# sourceMappingURL=main.b521bf43.chunk.js.map