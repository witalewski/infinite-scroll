{"version":3,"sources":["assets/loading.gif","utils/placeholderHeightGenerator.js","AppState.js","utils/cookieUtil.js","api/shibeAPI.js","components/NavBar.js","components/ImageItem.js","global/constants.js","components/ImageList.js","components/Gallery.js","components/NewPhotosView.js","components/FavouritesView.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","placeholderHeightGenerator","results","next","Math","floor","random","AppState","Object","toConsumableArray","this","imageURLs","concat","Range","placeholdersCount","map","_","isPlaceholder","placeholderHeightRatio","observable","Set","match","document","cookie","length","JSON","parse","readFavouritesCookie","action","_this","replace","_this2$imageURLs","_this2","push","apply","_this3","favourites","data","_this4","stringify","favourite","_this5","setFavourites","add","_this6","delete","computed","count","_this7","setPlaceholdersCount","axios","get","getImageURLs","then","_ref","addImageURLs","url","withRouter","inject","_ref2","appState","observer","location","react_default","a","createElement","className","href","label","path","size","item","key","pathname","Link","to","ImageItemStyled","styled","div","_templateObject","ImageItem","_Component","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","onMouseOver","setState","mouseOver","onMouseOut","state","message","undoVisible","undoAction","addToFavourites","image","imageRef","current","clientHeight","clientWidth","removeFromFavourites","timer","clearTimeout","setTimeout","primaryButtonVisible","createRef","inherits","createClass","value","target","classList","parentNode","style","height","_this$props","imageRefCurrent","isFavourite","includes","ref","alt","src","decoding","onLoad","onImageLoad","type","onClick","role","aria-label","Component","LIST_MARGIN","MIN_COLUMN_WIDTH","ImageListStyled","ul","ImageList_templateObject","loadingGif","ImageList","arguments","list","columnWidth","i","components_ImageItem","PhotosViewStyled","Gallery_templateObject","Gallery","getMinColumnHeight","columns","listContainerRef","childNodes","minHeight","Infinity","min","onScroll","scrollPosition","window","pageYOffset","documentElement","scrollTop","innerHeight","requestMoreImages","onResize","columnsCount","actualColumnWidth","initialized","addEventListener","infinite","removeEventListener","_this$state","images","title","imagesByColumn","List","forEach","elem","ImageList_ImageList","Gallery_Gallery","toJS","AppStyled","App_templateObject","App","index_module","components_NavBar","Switch","Route","exact","component","NewPhotosView","FavouritesView","Boolean","hostname","ReactDOM","render","BrowserRouter","basename","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.329d7173.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/loading.e404159f.gif\";","export const placeholderHeightGenerator = (() => {\n  const results = [0.75, 1, 1, 1.33];\n  return {\n    next: () => results[Math.floor(Math.random() * 4)],\n  };\n})();\n","import { observable, action, computed } from 'mobx';\nimport { Range, Set } from 'immutable';\nimport { getImageURLs } from './api/shibeAPI';\nimport { placeholderHeightGenerator } from './utils/placeholderHeightGenerator';\nimport {\n  storeFavouritesCookie,\n  readFavouritesCookie,\n} from './utils/cookieUtil';\nclass AppState {\n  @observable imageURLs = [];\n  @observable placeholdersCount = 0;\n\n  @observable favourites = new Set(readFavouritesCookie() || []);\n\n  @action\n  setImageURLs = imageURLs => {\n    this.imageURLs.replace(imageURLs);\n  };\n\n  @action addImageURLs = imageURLs => {\n    this.imageURLs.push(...imageURLs);\n  };\n\n  @action setPlaceholdersCount = placeholdersCount => {\n    this.placeholdersCount = placeholdersCount;\n  };\n\n  @action setFavourites = favourites => {\n    this.favourites = favourites;\n    storeFavouritesCookie(favourites);\n  };\n  @action addToFavourites = favourite => {\n    this.setFavourites(this.favourites.add(favourite));\n  };\n\n  @action removeFromFavourites = favourite => {\n    this.setFavourites(this.favourites.delete(favourite));\n  };\n\n  @computed get images() {\n    return [\n      ...this.imageURLs,\n      ...Range(0, this.placeholdersCount).map(_ => ({\n        isPlaceholder: true,\n        placeholderHeightRatio: placeholderHeightGenerator.next(),\n      })),\n    ];\n  }\n\n  @action\n  requestMoreImages = count => {\n    this.setPlaceholdersCount(this.placeholdersCount + count);\n    getImageURLs(count).then(({ data }) => {\n      this.setPlaceholdersCount(this.placeholdersCount - count);\n      this.addImageURLs(\n        data.map(url => ({\n          url,\n          isPlaceholder: false,\n          placeholderHeightRatio: placeholderHeightGenerator.next(),\n        }))\n      );\n    });\n  };\n}\n\nexport { AppState };\n","export const readFavouritesCookie = () => {\n    const match = document.cookie.match(/favourite-shibe-dogs=([^;]*)/);\n    if (match !== null && match.length > 0) {\n        return JSON.parse(match[1]);\n    }\n    return null;\n}\nexport const storeFavouritesCookie = data => document.cookie = `favourite-shibe-dogs=${JSON.stringify(data)}`;","import axios from 'axios';\nexport const getImageURLs = count => axios.get(`https://cors.io/?https://shibe.online/api/shibes?count=${count}`);","import React from 'react';\nimport { Link, withRouter } from 'react-router-dom';\nimport { inject, observer } from 'mobx-react';\nexport const NavBar = ({ location, favourites }) => (\n  <nav className=\"navbar sticky-top navbar-light bg-light navbar-expand\">\n    <a className=\"navbar-brand\" href=\"/\">\n      Infinite Scroll Demo\n    </a>\n    <div className=\"collapse navbar-collapse\">\n      <ul className=\"navbar-nav\">\n        {[\n          { label: 'New Photos', path: '/' },\n          { label: `Favourites (${favourites.size})`, path: '/favourites' },\n        ].map(item => (\n          <li\n            key={item.label}\n            className={`nav-item ${location.pathname === item.path &&\n              'active'}`}\n          >\n            <Link className=\"nav-link\" to={item.path}>\n              {item.label}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </div>\n  </nav>\n);\n\nexport default withRouter(\n  inject(({ appState }) => ({\n    favourites: appState.favourites,\n  }))(observer(NavBar))\n);\n","import React, { Component, createRef } from 'react';\nimport { observer, inject } from 'mobx-react';\nimport styled from '@emotion/styled';\n\nconst ImageItemStyled = styled.div`\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  .image {\n    opacity: 0;\n    position: absolute;\n  }\n\n  .image--loaded {\n    opacity: 1;\n    transition: opacity 0.5s;\n  }\n\n  .overlay {\n    position: absolute;\n    top: 50%;\n    width: 100%;\n    height: 40%;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    opacity: 1;\n\n    background: rgba(255, 255, 255, 0.9);\n\n    transition: opacity 0.2s;\n    transform: translateY(-50%);\n  }\n\n  .overlay--hidden {\n    opacity: 0;\n  }\n\n  .primary-button--hidden {\n    display: none;\n  }\n\n  .message {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  .message--hidden {\n    display: none;\n  }\n\n  .favourites-indicator {\n    position: absolute;\n    bottom: 12px;\n    right: 12px;\n    transition: opacity 0.5s 0.2s;\n  }\n\n  .favourites-indicator--hidden {\n    opacity: 0;\n  }\n`;\n\nexport class ImageItem extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mouseOver: false,\n      message: '',\n      primaryButtonVisible: false,\n    };\n    this.imageRef = createRef();\n  }\n  onImageLoad({ target }) {\n    target.classList.add('image--loaded');\n    target.parentNode.parentNode.style.height = `${target.clientHeight}px`;\n  }\n\n  onMouseOver = () => {\n    this.setState({ mouseOver: true });\n  };\n\n  onMouseOut = () => {\n    if (!this.state.message) {\n      this.setState({\n        mouseOver: false,\n        message: '',\n        undoVisible: false,\n        undoAction: null,\n      });\n    }\n  };\n\n  addToFavourites = () => {\n    const image = this.imageRef.current;\n    this.props.addToFavourites({\n        url: this.props.image.url,\n        placeholderHeightRatio: image.clientHeight / image.clientWidth,\n      });\n    this.setState({\n      message: 'Added to favourites!',\n      undoAction: this.removeFromFavourites,\n    });\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(() => {\n      this.setState({\n        mouseOver: false,\n        message: '',\n        undoVisible: false,\n        undoAction: null,\n        primaryButtonVisible: false,\n      });\n    }, 2000);\n  };\n\n  removeFromFavourites = () => {\n    const image = this.imageRef.current;\n    this.props.removeFromFavourites({\n      url: this.props.image.url,\n      placeholderHeightRatio: image.clientHeight / image.clientWidth,\n    });\n    this.setState({\n      message: 'Removed from favourites.',\n      undoAction: this.addToFavourites,\n    });\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n    this.timer = setTimeout(() => {\n      this.setState({\n        mouseOver: false,\n        message: '',\n        undoVisible: false,\n        undoAction: null,\n        primaryButtonVisible: false,\n      });\n    }, 2000);\n  };\n\n  render() {\n    const { image, favourites } = this.props;\n    const { mouseOver } = this.state;\n    const imageRefCurrent = this.imageRef.current;\n    const isFavourite = favourites.includes({\n        url: this.props.image.url,\n        placeholderHeightRatio: imageRefCurrent.clientHeight / imageRefCurrent.clientWidth,\n      });\n    return (\n      <ImageItemStyled\n        onMouseOver={this.onMouseOver}\n        onMouseOut={this.onMouseOut}\n      >\n        {image.isPlaceholder ? (\n          <div className=\"image-placeholder\" />\n        ) : (\n          <img\n            ref={this.imageRef}\n            className=\"image\"\n            alt=\"Shibe dog\"\n            src={image.url}\n            decoding=\"async\"\n            onLoad={this.onImageLoad}\n          />\n        )}\n        <div className={`overlay ${!mouseOver && 'overlay--hidden'}`}>\n          <button\n            type=\"button\"\n            className={`btn btn-outline-primary primary-button ${this.state\n              .message && 'primary-button--hidden'}`}\n            onClick={\n              isFavourite ? this.removeFromFavourites : this.addToFavourites\n            }\n          >\n            {isFavourite ? '💔 Remove from Favourites' : '❤️ Add to Favourites'}\n          </button>\n          <div\n            className={`message ${!this.state.message && 'message--hidden'}`}\n          >\n            <span>{this.state.message}</span>\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary btn-sm\"\n              onClick={this.state.undoAction}\n            >\n              Undo\n            </button>\n          </div>\n        </div>\n        <div\n          className={`favourites-indicator ${!isFavourite &&\n            'favourites-indicator--hidden'}`}\n        >\n          <span role=\"img\" aria-label=\"favourite\">\n            ❤️\n          </span>\n          ️\n        </div>\n      </ImageItemStyled>\n    );\n  }\n}\n\nexport default inject(({ appState }) => ({\n  favourites: appState.favourites,\n  addToFavourites: appState.addToFavourites,\n  removeFromFavourites: appState.removeFromFavourites,\n}))(observer(ImageItem));\n","export const MIN_LIST_WIDTH = 300;\nexport const LIST_MARGIN = 6;\nexport const MIN_COLUMN_WIDTH = MIN_LIST_WIDTH + 2 * LIST_MARGIN;","import React, { Component } from 'react';\nimport styled from '@emotion/styled';\nimport ImageItem from './ImageItem';\nimport { LIST_MARGIN } from '../global/constants';\nimport loadingGif from '../assets/loading.gif'\n\nconst ImageListStyled = styled.ul`\n  .image-list--item {\n    background-image: url(${loadingGif});\n    background-color: lightgray;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-blend-mode: multiply;\n    \n    margin: ${LIST_MARGIN}px 0;\n    transition: height 0.2s;\n  }\n`;\nexport class ImageList extends Component {\n  render() {\n    const { list, columnWidth } = this.props;\n    return (\n      <ImageListStyled className=\"image-list\">\n        {list.map((image, i) => (\n          <li\n            className=\"image-list--item\"\n            key={`${image.url || 'placeholder'}-${i}`}\n            style={{\n              height: columnWidth * image.placeholderHeightRatio,\n            }}\n          >\n            <ImageItem image={image} />\n          </li>\n        ))}\n      </ImageListStyled>\n    );\n  }\n}\n","import React, { Component, createRef } from 'react';\nimport { List, Range } from 'immutable';\nimport styled from '@emotion/styled';\nimport { ImageList } from './ImageList';\nimport { LIST_MARGIN, MIN_COLUMN_WIDTH } from '../global/constants';\n\nconst PhotosViewStyled = styled.div`\n  .image-list-container {\n    display: flex;\n    justify-content: center;\n    align-items: flex-start;\n  }\n\n  .image-list {\n    list-style: none;\n    display: flex;\n    flex-direction: column;\n    flex-basis: 50%;\n    padding: 0;\n    margin: 0 ${LIST_MARGIN}px;\n  }\n\n  .image {\n    width: 100%;\n    object-fit: cover;\n  }\n\n  .image-placeholder {\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nexport class Gallery extends Component {\n  constructor(props) {\n    super(props);\n    this.listContainerRef = createRef();\n    this.state = {\n      initialized: false,\n      columnsCount: 0,\n      actualColumnWidth: 0,\n    };\n  }\n\n  getMinColumnHeight = () => {\n    const columns = this.listContainerRef.current.childNodes;\n    if (columns && columns.length > 0) {\n      let minHeight = Infinity;\n      for (let i = 0; i < columns.length; i++) {\n        minHeight = Math.min(minHeight, columns[i].clientHeight);\n      }\n      return minHeight;\n    }\n    return 0;\n  };\n\n  onScroll = () => {\n    const scrollPosition =\n      window.pageYOffset || document.documentElement.scrollTop;\n    if (this.getMinColumnHeight() < window.innerHeight + scrollPosition) {\n      this.props.requestMoreImages(16);\n    }\n  };\n\n  onResize = () => {\n    const columnsCount = Math.floor(\n      this.listContainerRef.current.clientWidth / MIN_COLUMN_WIDTH\n    );\n    const actualColumnWidth =\n      this.listContainerRef.current.clientWidth / columnsCount -\n      2 * LIST_MARGIN;\n    this.setState({\n      columnsCount,\n      actualColumnWidth,\n    });\n  };\n\n  componentDidMount() {\n    if (!this.state.initialized) {\n      window.addEventListener('resize', this.onResize);\n      this.onResize();\n\n      if (this.props.infinite) {\n        window.addEventListener('scroll', this.onScroll);\n        this.onScroll();\n      }\n\n      this.setState({ initialized: true });\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize',this.onResize);\n\n    if (this.props.infinite) {\n      window.removeEventListener('scroll', this.onScroll);\n    }\n  }\n\n  render() {\n    const { columnsCount, actualColumnWidth } = this.state;\n    const { images, title } = this.props;\n    const imagesByColumn = List(Range(0, columnsCount).map(_ => []));\n    \n    if (columnsCount && actualColumnWidth) {\n      images.forEach((elem, i) => {\n        imagesByColumn.get(i % columnsCount).push(elem)\n      });\n    }\n    return (\n      <PhotosViewStyled>\n        <div className=\"row\">\n          <div className=\"col\">\n          <h1>{title}</h1>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col image-list-container\" ref={this.listContainerRef}>\n            {imagesByColumn.map((list, i) => (\n              <ImageList\n                key={`list-${i}-of-${columnsCount}`}\n                list={list}\n                columnWidth={actualColumnWidth}\n              />\n            ))}\n          </div>\n        </div>\n      </PhotosViewStyled>\n    );\n  }\n}\n","import React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { Gallery } from './Gallery';\n\nexport const NewPhotosView = ({ images, requestMoreImages }) => (\n  <Gallery\n    infinite\n    title=\"New Photos\"\n    images={images}\n    requestMoreImages={requestMoreImages}\n  />\n);\n\nexport default inject(({ appState }) => ({\n  images: appState.images,\n  requestMoreImages: appState.requestMoreImages,\n}))(observer(NewPhotosView));\n","import React from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { Gallery } from './Gallery';\n\nexport const FavouritesView = ({ favourites }) => (\n  <Gallery title=\"Favourites\" images={favourites.toJS()} />\n);\n\nexport default inject(({ appState }) => ({\n  favourites: appState.favourites,\n}))(observer(FavouritesView));\n","import React from 'react';\nimport { Provider } from 'mobx-react';\nimport styled from '@emotion/styled';\nimport { AppState } from './AppState';\nimport { Switch, Route } from 'react-router-dom';\nimport NavBar from './components/NavBar';\nimport NewPhotosView from './components/NewPhotosView';\nimport FavouritesView from './components/FavouritesView';\n\nconst AppStyled = styled.div`\n  .main {\n    padding-top: 56px;\n  }\n`;\n\nconst appState = new AppState();\n\nexport const App = () => (\n  <Provider appState={appState}>\n    <AppStyled className=\"App\">\n      <NavBar />\n      <div className=\"main container\">\n        <Switch>\n          <Route exact path=\"/\" component={NewPhotosView} />\n          <Route exact path=\"/favourites\" component={FavouritesView} />\n        </Switch>\n      </div>\n    </AppStyled>\n  </Provider>\n);\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <BrowserRouter basename=\"/infinite-scroll\">\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}